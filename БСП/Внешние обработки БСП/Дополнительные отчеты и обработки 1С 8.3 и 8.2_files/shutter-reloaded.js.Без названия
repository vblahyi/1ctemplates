/*v0.6*/
var shutterLinks={},shutterSets={}, showfblike=shutterSettings.showfblike;function shutterAddLoad(a){if("undefined"!=typeof jQuery){jQuery(document).ready(a())}else{if(typeof window.onload!="function"){window.onload=a}else{oldonld=window.onload;window.onload=function(){if(oldonld){oldonld()}a()}}}}shutterReloaded={I:function(b){return document.getElementById(b)},settings:function(){var a=this,b=shutterSettings;a.L10n=b.L10n||["Previous","Next","Close","Full Size","Fit to Screen","Image","of","Loading..."];a.imageCount=b.imageCount||0;a.textBtns=b.textBtns||0;a.imgDir=b.imgDir||"/wp-content/plugins/shutter-reloaded/menu/";a.FS=b.FS||0;a.oneSet=b.oneSet||0},init:function(o){var p=this,n,e,b,h,f,c,s,r,l,q,d,g;if("object"!=typeof shutterSettings){shutterSettings={}}p.settings();for(h=0,f=document.links.length;h<f;h++){n=document.links[h];b=(n.href.indexOf("?")==-1)?n.href.slice(-4).toLowerCase():n.href.substring(0,n.href.indexOf("?")).slice(-4).toLowerCase();if(b!=".jpg"&&b!=".png"&&b!=".gif"&&b!="jpeg"){continue}if(o=="sh"&&n.className.toLowerCase().indexOf("shutter")==-1){continue}if(o=="lb"&&n.rel.toLowerCase().indexOf("lightbox")==-1){continue}if(n.className&&n.className.toLowerCase().indexOf("shutterset")!=-1){s=n.className.match(/shutterset[^\s]*/g)}else{if(n.rel&&n.rel.toLowerCase().indexOf("lightbox[")!=-1){s=n.rel.replace(/\s/g,"_")}else{if(p.oneSet){s="oneSetForAllLinks"}else{s=0,r=-1}}}if(s){if(!shutterSets[s]){shutterSets[s]=[]}r=shutterSets[s].push(h)}l=n.href.slice(n.href.lastIndexOf("/")+1);e=(n.title&&n.title!=l)?n.title:"";if(!e&&n.firstChild&&n.firstChild.nodeName=="IMG"){e=n.firstChild.title||""}shutterLinks[h]={link:n.href,num:r,set:s,title:e};n.onclick=new Function('shutterReloaded.make("'+h+'");return false;')}},make:function(j,g){var n=this,q,r,b="",p="",s,c,a,l,o,f,e,h=-1,d,k,i,u,m;if(!n.Top){if(typeof window.pageYOffset!="undefined"){n.Top=window.pageYOffset}else{n.Top=(document.documentElement.scrollTop>0)?document.documentElement.scrollTop:document.body.scrollTop}}if(typeof n.pgHeight=="undefined"){n.pgHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)}if(g){n.FS=(g>0)?1:0}else{n.FS=shutterSettings.FS||0}if(n.resizing){n.resizing=null}window.onresize=new Function('shutterReloaded.resize("'+j+'");');document.documentElement.style.overflowX="hidden";if(!n.VP){n._viewPort();n.VP=true}if(!(f=n.I("shShutter"))){f=document.createElement("div");f.setAttribute("id","shShutter");f.setAttribute("onclick","shutterReloaded.hideShutter();return false");document.getElementsByTagName("body")[0].appendChild(f);n.hideTags()}if(!(o=n.I("shDisplay"))){o=document.createElement("div");o.setAttribute("id","shDisplay");o.style.top=n.Top+"px";document.getElementsByTagName("body")[0].appendChild(o)}f.style.height=n.pgHeight+"px";m=n.textBtns?" | ":"";if(shutterLinks[j].num>1){q=shutterSets[shutterLinks[j].set][shutterLinks[j].num-2];a=n.textBtns?n.L10n[0]:'<img src="'+n.imgDir+'icons.png" id="previmg" title="'+n.L10n[0]+'" />';b='<a href="#" id="prevpic" onclick="shutterReloaded.make('+q+');return false">'+a+"</a>"+m;s=new Image();s.src=shutterLinks[q].link}else{b=n.textBtns?'<span class="srel-d">'+n.L10n[0]+"</span>"+m:'<span id="prevad"><img class="srel-d" src="'+n.imgDir+'icons.png" id="previmgd" title="'+n.L10n[0]+'" /></span>'}if(shutterLinks[j].num!=-1&&shutterLinks[j].num<(shutterSets[shutterLinks[j].set].length)){r=shutterSets[shutterLinks[j].set][shutterLinks[j].num];l=n.textBtns?n.L10n[1]:'<img src="'+n.imgDir+'icons.png" id="nextimg" title="'+n.L10n[1]+'" />';p='<a href="#" onclick="shutterReloaded.make('+r+');return false" id="nextpic">'+l+"</a>"+m;c=new Image();c.src=shutterLinks[r].link}else{p=n.textBtns?'<span class="srel-d">'+n.L10n[1]+"</span>"+m:'<span id="nextad"><img class="srel-d" src="'+n.imgDir+'icons.png" id="nextimgd" title="'+n.L10n[1]+'" /></span>'}k=n.textBtns?n.L10n[2]:'<img src="'+n.imgDir+'icons.png" id="cancelimg" title="'+n.L10n[2]+'" />';if((shutterLinks[j].num>0)&&n.imageCount){var newtext=" "+n.L10n[5]+"&nbsp;"+shutterLinks[j].num+"&nbsp;"+n.L10n[6]+"&nbsp;"+shutterSets[shutterLinks[j].set].length;if(showfblike==true){newtext=newtext+'<iframe src="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(document.URL)+'&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=593143787418480" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px;" allowTransparency="true"></iframe>';}d=newtext;}else{d='';}if(n.FS){i=n.textBtns?n.L10n[4]:'<img src="'+n.imgDir+'icons.png" id="resize2" title="'+n.L10n[4]+'"	/>'}else{i=n.textBtns?n.L10n[3]:'<img src="'+n.imgDir+'icons.png" id="resize1" title="'+n.L10n[3]+'" />';h=1}fsbtn_d=n.textBtns?'<span class="srel-d">'+n.L10n[3]+"</span>"+m:'<img class="srel-d" src="'+n.imgDir+'icons.png" id="resized" title="'+n.L10n[3]+'" />';u='<span id="fullSize"><a href="#" onclick="shutterReloaded.make('+j+", "+h+');return false">'+i+"</a>"+m+'</span><span id="fullSize-d">'+fsbtn_d+"</span>";if(!(e=n.I("shNavBar"))){e=document.createElement("div");e.setAttribute("id","shNavBar");document.getElementsByTagName("body")[0].appendChild(e)}e.innerHTML=m+b+'<a href="#" id="closepic" onclick="shutterReloaded.hideShutter();return false">'+k+"</a>"+m+p+u+d;o.innerHTML='<div id="shWrap" onclick="shutterReloaded.hideShutter();return false"><img src="'+shutterLinks[j].link+'" id="shTopImg" style="cursor:pointer" title="Click for next image" onload="shutterReloaded.showImg();" onclick="shutterReloaded.make('+r+');event.stopPropagation();return false" /><div id="shTitle">'+shutterLinks[j].title+'</div></div>';document.onkeydown = function(event){shutterReloaded.handleArrowKeys(event);};window.setTimeout(function(){shutterReloaded.loading()},2000)},loading:function(){var c=this,b,d,a;if((a=c.I("shWrap"))&&a.style.visibility=="visible"){return}if(!(b=c.I("shShutter"))){return}if(c.I("shWaitBar")){return}d=document.createElement("div");d.setAttribute("id","shWaitBar");d.style.top=c.Top+"px";d.innerHTML='<img src="'+c.imgDir+'loading.gif" title="'+c.L10n[7]+'" />';b.appendChild(d)},hideShutter:function(){var c=this,d,b,a;if(d=c.I("shDisplay")){d.parentNode.removeChild(d)}if(b=c.I("shShutter")){b.parentNode.removeChild(b)}if(a=c.I("shNavBar")){a.parentNode.removeChild(a)}c.hideTags(true);document.documentElement.style.overflowX="";window.scrollTo(0,c.Top);window.onresize=c.FS=c.Top=c.VP=null},resize:function(c){var b=this,a;if(b.resizing){return}if(!b.I("shShutter")){return}a=b.I("shWrap");if(a){a.style.visibility="hidden"}window.setTimeout(function(){shutterReloaded.resizing=null},500);window.setTimeout(new Function('shutterReloaded.VP = null;shutterReloaded.make("'+c+'");'),100);b.resizing=true},_viewPort:function(){var d=this,b=window.innerHeight?window.innerHeight:0,f=document.body.clientHeight?document.body.clientHeight:0,c=document.documentElement?document.documentElement.clientHeight:0,a,e;if(b>0){d.wHeight=((b-f)>1&&(b-f)<30)?f:b;d.wHeight=((d.wHeight-c)>1&&(d.wHeight-c)<30)?c:d.wHeight}else{d.wHeight=(c>0)?c:f}a=document.documentElement?document.documentElement.clientWidth:0;e=window.innerWidth?window.innerWidth:document.body.clientWidth;d.wWidth=(a>1)?a:e},showImg:function(){var m=this,g=m.I("shShutter"),a=m.I("shDisplay"),i=m.I("shTopImg"),f=m.I("shTitle"),n=m.I("shNavBar"),c,l,b,k,j,e,d,h=0;if(!g){return}if((c=m.I("shWrap"))&&c.style.visibility=="visible"){return}if(l=m.I("shWaitBar")){l.parentNode.removeChild(l)}g.style.width=a.style.width="";f.style.width=(i.width-4)+"px";b=n.offsetHeight?f.offsetHeight+n.offsetHeight:30;k=m.wHeight-7-b;if(m.FS){if(i.width>(m.wWidth-10)){g.style.width=a.style.width=i.width+10+"px"}document.documentElement.style.overflowX=""}else{window.scrollTo(0,m.Top);if(i.height>k){i.width=i.width*(k/i.height);i.height=k;h=1}if(i.width>(m.wWidth-16)){i.height=i.height*((m.wWidth-16)/i.width);i.width=m.wWidth-16;h=1}f.style.width=(i.width-4)+"px";n.style.bottom="0px"}j=m.Top+i.height+b+10;if(j>m.pgHeight){g.style.height=j+"px"}window.scrollTo(0,m.Top);if((m.FS&&(i.height>k||i.width>m.wWidth))||h){m.I("fullSize").style.display="inline-block";m.I("fullSize-d").style.display="none"}e=(k-i.height)*0.45;d=(e>3)?Math.floor(e):3;a.style.top=m.Top+d+"px";n.style.bottom="0";c.style.visibility="visible";if(typeof(_gaq) != "undefined"){_gaq.push(['_trackPageview']);}},hideTags:function(a){var f=document.getElementsByTagName("select"),g=document.getElementsByTagName("object"),b=document.getElementsByTagName("embed"),h=document.getElementsByTagName("iframe"),e=(a)?"visible":"hidden",d,c;for(d=0,c=f.length;d<c;d++){f[d].style.visibility=e}for(d=0,c=g.length;d<c;d++){g[d].style.visibility=e}for(d=0,c=b.length;d<c;d++){b[d].style.visibility=e}for(d=0,c=h.length;d<c;d++){h[d].style.visibility=e}},handleArrowKeys:function(e){var code=0;if(!e)var e=window.event;if(e.keyCode)code=e.keyCode;else if(e.which)code=e.which;var nl=document.getElementById('prevpic');var pl=document.getElementById('nextpic');var cl=document.getElementById('closepic');switch(code){case 39:if(pl)pl.onclick();break;case 37:if(nl)nl.onclick();break;case 27:if(cl)cl.onclick();break;}}};